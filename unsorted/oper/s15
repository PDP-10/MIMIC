	XLIST
;
;
;DEFINTONS FOR MIMIC7, PDP-7/9/15 SIMULATOR SYSTEM.
;
;ALLOCATION OF PDP-10 REGISTERS:
;
	TM=0	;TIMER
	XR1=10	;INDEX REGISTERS
	XR2=11
	XR3=12
	F=1	;I/O FLAGS
	IR=2	;IR
	PC=3	;PC
	AC=4	;L-AC
	MQ=5
	MA=6	;MA
	P=17	;PUSHDOWN
	MB=7	;MB


	DEFINE CLRL(AA)
<	HLLI AA,0>

	DEFINE CLRR(AA)
<	HRRI AA,0>

	EXTERN SMGR
;
	DEFINE CANCEL(UNT)
<	SKIPN ,UNT'UCB+UACT	;IS THE BSY FLAG ON
	POPJ P,
	CLEARM ,UNT'UCB+UACT
	MOVEI XR1,UNT'UCB	;SET UP UCB ADDRESS
	MOVEM XR1,.UCBAD
	PUSHJ P,.CNCEL	;CANCEL UCB
	POPJ P,	>

	DEFINE ACTIVE(UNT,F)
<	SKIPE ,UNT'UCB+UACT
	JRST F
	SETOM ,UNT'UCB+UACT
	MOVEI XR1,UNT'UCB
	MOVEM XR1,.UCBAD
	MOVE XR1,UNT'TIM
	ADD XR1,TM
	MOVEM XR1,UNT'UCB+UTIM
	PUSHJ P,.ACTVT	>

	DEFINE NOP
<	CAI 0,0>
	LIST
