	XLIST
IFNDEF ADR,<	ADR==0>	;INSTALLATION SWITCHES
IFNDEF DIGITL,<	DIGITL==0>
IFNDEF TYMSHR,<	TYMSHR==0>
IFNDEF ONLINE,<	ONLINE==0>
IFNDEF FDATA,<	FDATA==0>
IFNDEF ISC,<	ISC==0>
IFNDEF TIMLTD,<	TIMLTD==0>
IFNDEF DTALIN,<	DTALIN==0>

IFNDEF LEVELD,<	LEVELD==1>	;FEATURE SWITCHES:  LEVEL-D
IFNDEF CCTRAP,<	CCTRAP==1>	;^C TRAPPING

IFN TYMSHR,<	CCTRAP==0>
IFN ONLINE,<	LEVELD==0
		CCTRAP==0>
IFN ISC,<	LEVELD==0
		CCTRAP==0>
IFN DTALIN,<	LEVELD==0
		CCTRAP==0>

	OPDEF PJRST [JRST]

;
;MIMIC DEFINITIONS, 10/25/70.
;I.  DATA STRUCTURE OFFSET DEFINITIONS.
;A)  D(EVICE) D(ATA) M(ODULE) DEFNS [ALSO CALLED CDM].
;    THE DDM CONTAINS DESCRIPTIVE INFORMATION ABOUT A DEVICE.
;
	DNAM==0	;NAME
	DSYN==1	;DEVICE SYNTAX START (RIGHT HALF)
	DATT==2	;DETACH/ATTACH SUBROUTINES
	DRDB==3	;FIRST RDB (LEFT HALF)
	DUCB==3	;FIRST UCB (R)
	DADR==4	;ADDRESSES: RADIX+BITS
	DVAL==5	;VALUES: RADIX+BITS
	DSTAT==6	;STATUS (L)
	DSIZ==6	;PHYSICAL FRAME SIZE (R)
	DNFRM==7	;MAX# OF FRAMES
	DREAD==10	;READ ROUTINE (L)
	DWRT==10	;WRITE ROUTINE (R)
	DRST==11	;RESET ROUTINE (L)
	DAINT==11	;ADDRESS INTERPRETER (R)
	DBST==12	;BREAK BIT SET/CLEAR ROUTINE (L)
	DHON==12	;BREAK HONOR ROUTINE (R)
;
;B)  U(NIT) C(ONTROL) B(LOCK) DEFNS.  UCBS ARE USED FOR DEVICE TIMING
;    AND DATA TRANSMISSION.
;
	UACT==0	;NEXT ACTIVE UNIT (R)
	UTIM==1	;UNIT TIME OUT
	UFAB==2	;UNIT FILE ACCESS BLOCK (L)
	USRV==2	;UNIT SERVICE ROUTINE (R)
	UNAM==3	;NAME
	UATT==4	;NEXT ATTACHED UNIT (L)
	UNXT==4	;NEXT UCB IN THIS DDM (R)
	UFRM==5	;CURRENT FRAME#
	UBUF==6	;FRAME BUFFER
	USTAT==7	;STATUS (L)
	UDDM==7	;PARENT DDM (R)
	UFLGS==10	;FLAGS
	UBOT==UFLGS	;LAST WORD IN UCB
;
;C)  F(ILE) A(CCESS) B(LOCK) DEFNS.  FABS ARE MIMIC-FORMATTED FILE
;   BUFFERS.
;
	FSTAT==0	;STATUS (L)
	FSIZ==0	;PHYSICAL FRAME SIZE (R)
	FNFRM==1	;MAX # OF FRAMES
	FFRM==2	;CURRENT FRAME#
	FPTR==3	;BYTE PTR
	FBLF==4	;BLOCK FRAME COUNT (R)
	FNAME==5	;FILE NAME
	FEXT==6	;FILE EXTENSION (L)
	FUCB==6	;PARENT UCB (R)
	FPJ==7	;PROJECT#, PROGRAMMER#
	FBLK==10	;CURRENT BLOCK (L)
	FCHNL==10	;SOFTWARE CHANNEL (R)
	FBUF==11	;BUFFER COMMAND WORD.
;
;D)  B(REAK) C(ONTROL) T(ABLE) INTERFACE DEFNS.
;
	BLO==0	;LOW FRAME
	BHI==1	;HIGH FRAME
	BFRM==0	;FRAME #
	BBRK==2	;BREAK BITS (L)
	BUCB==2	;UNIT ADDRESS (R)
	BACT==3	;ACTION BITS
	BCNT==4	;COUNT
;
;E)  R(EGISTER) D(ESCRIPTION) B(LOCK) DEFNS.
;
	RNAM==0	;NAME
	RPTR==1	;BYTE PTR
	RFLGS==2	;VALUE: ?PROTECT, RADIX, BITS
;
;F)  SYS(TEM) L(I)ST.  A LIST OF INTERFACE ADDRESSES.
;
	SYNAME==0	;SYSTEM NAME
	SYFTCH==1	;FETCH PHASE ENTRY POINT (R)
	SYPC==2	;PC RDB ADDRESS (R)
	SYLDR==3	;LOADER
	SYBLD==4	;BUILDUP VM AC'S ROUTINE (R)
	SYTEAR==5	;TEAR DOWN VM AC'S ROUTINE (R)
	SYTIM==10	;POINTER TO SYSTEM TIMER (R)
;
;G)  B(REAK) C(ONTROL) T(ABLE) DEFINITIONS
;
	BCTLO==0	;LOW FRAME
	BCTHI==1	;HIGH FRAME
	BCTBRK==2	;BREAK BITS (L)
	BCTUCB=2	;UCB ADDRESS (R)
	BCTACT==3	;ACTION BITS
	BCTCNT==4	;COUNT

;MISCELLANEOUS DEFINITIONS

ACTSIZ=^D12	;SIZE OF AN ACTION BUFFER
ENTSIZ=5	;SIZE OF A BCT ENTRY
FABSIZ=213	;LENGTH OF A FAB
ACTMAX=^D36	;# OF ACTIONS

;MIMIC DEFINITIONS, PAGE 2
;II.  STATUS HALFWORD DEFNS.
;A)  FLAG BITS (1=YES)
;
	QADR=400000	;?ADDRESSABLE DEVICE
	QBRK=200000	;?BREAKABLE
	QFIX=100000	;?FIXED CAPACITY
	QATBL=040000	;?ATTACHABLE
	QRD=020000	;?READ ONLY

	QATT=004000	;?ATTACHED
	QTTY=002000	;?TO TTY
	QDSK=001000	;?TO DISK

	QBLK=000200	;?BLOCK ALTERED
;
;B)  ERROR BITS
;
	EPROT=000040	;PROTECTION FAILURE (ATTACH)
	ENOF=000020	;NO FILE FOR RDONLY DEVICE (ATTACH)
	ECHNL=000010	;NO CHANNELS AVAILABLE (ATTACH)
	ENTAT=000100	;NOT ATTACHABLE (ATTACH)
	EUNAT=000002	;NOT ATTACHED (DETACH, READ/WRITE)
	EFRM=000001	;FRAME # ERROR (READ/WRITE)
	EUNK=000004	;I/O ERROR (READ/WRITE)
	ALLERR=177	;MASK FOR ALL ERROR BITS.
;MIMIC DEFINITIONS, PAGE 3
;III. DATA STRUCTURE MACROS
;
	DEFINE DDM1(NM,FR,FU,ATS,DTS)
<	SIXBIT /NM/
	Z
IFNB <ATS>,<	XWD DTS,ATS>
IFB <ATS>,<	Z>
	XWD FR,FU>

	DEFINE DDM2(ARX,AB,FRX,FRB)
<	XWD ARX,AB
	XWD FRX,FRB>

	DEFINE DDM3(ST,SIZ,NFR)
<	XWD ST,SIZ
	NFR>

	DEFINE DDM4(RD,WR,RST,LDR,BR,HNR)
<	XWD RD,WR
	XWD RST,LDR
	XWD BR,HNR>

	DEFINE FAB(ST,CHL)
<>

	DEFINE UCB(NM,NUCB,PDDM,SRV,FB,ST)
<	Z
	Z
	XWD 0,SRV
	SIXBIT /NM/
	XWD 0,NUCB
NM'CNT:	Z
NM'BUF:	Z
	XWD ST,PDDM
	Z>

	DEFINE RBLK(NM,LOC,SIZ,PROT,R,BIT)
<	RADIX ^D10
	SIXBIT /NM/
	POINT SIZ,LOC,BIT
	BYTE (1)PROT(17)R(18)SIZ
	RADIX 8>

	DEFINE RDB(NM,LOC,SIZ,PROT)
<	RBLK NM,LOC,SIZ,PROT,8,35>

	DEFINE FLG(NM,LOC,BIT)
<	RBLK NM,LOC,1,0,2,BIT>

	DEFINE DRDB(NM,LOC,SIZ,PROT)
<	RBLK NM,LOC,SIZ,PROT,10,35>
;MIMIC DEFINITIONS, PAGE 4
;IV. SYNTACTIC CHARACTER DEFINITIONS, 7-BIT ASCII.
;
	AWRU=005	;INTERRUPT EXECUTION
	ABLINE=052	;BEGIN LINE.
	AKLINE=025	;KILL LINE.
	ARBOUT=177	;KILL CHARACTER.
	AILLEG=007	;ILLEGAL CHAR ECHO.
	ANONO=134	;RUBOUT ECHO.

	ADSPLY=77	;COMMAND TERMINATORS: DISPLAY
	AINPT=72	;INPUT
	AOPEN=57	;OPEN
	AJAM=137	;JAM
	AFWD=12	;LOCAL INPUT TERMINATORS:  FORWARD
	ABKWD=136	;BACKWARD
	AINDCT=57	;INDIRECT ADDRESS
	AEFA=100	;EFFECTIVE ADDRESS
	BUFMAX=^D72	;MAXIMUM# OF INPUT CHARS.
;MIMIC DEFINITIONS, PAGE 5
;V. SYNTAX MACHINE GENERAL REGISTER ASSIGMNENTS.
;
;
	DEFINE XRG(AA)
<	AA=SMGR+XRGBS
	X'AA==XRGBS
	XRGBS=XRGBS+1>

	XRGBS=1	;INDEX ADDRESSABLE GR'S.
	XRG VALUE
	XRG LOCTRM
	XRG TRM
	XRG REGADR
	XRG NAME

	XRGBS=10	;INDEX REGISTERS
	XRG SRELN
	XRG SBOOL
	XRG CONADR
	XRG UNTADR

	XRGBS=20
	XRG NRADIX
	XRG NBITS
	XRG DFUADR
	XRG DFCADR
	XRG QDFAULT
	XRG QGO
	XRG QMULT
	XRG ATMPTR
	XRG ATMTMP
	XRG SVAL
	XRG SMSK
	XRG TXTADR
	XRG TXTTRM
	XRG FRMNUM
	XRG ULIMIT
	XRG LLIMIT
	XRG ATMF
	XRG ATMR
	XRG CNPLUG
	XRG SCHVAL
	XRG .UCBAD
	XRG SMPTR
	XRG SMSAVE
	XRG CMSGAD
	XRG DMPFLG

	XRGBS=60
	XRG .LEBLK

	XRGBS=64
	XRG BRKBLK

	XRGBS=70
	XRG DO

	XRGBS=74
	XRG UNDO
	LIST
