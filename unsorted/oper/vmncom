;
	TITLE VMNCOM	NOVA/SUPERNOVA COMMUNICATIONS REGION
IFNDEF LPT,<	LPT=0>
IFNDEF MDV,<	MDV=0>
IFNDEF PTR,<	PTR=0>
IFNDEF PTP,<	PTP=0>
IFNDEF DSK,<	DSK=0>
IFNDEF RTC,<	RTC=0>
IFNDEF CDR,<	CDR=0>
IFNDEF DCM,<	DCM=0>
;
	EXTERN NOVSYN,AC,ILLEG,CPUDDM,TTIDDM,TTODDM
	EXTERN TTOP,TTIP,IOT77P,TTORST,TTIRST
	INTERN IOTTBL,BITTBL,CDMLST,RSTLST
;
CDMLST:	Z ,CPUDDM	;CONTROLLERS:  CPU
	Z ,TTIDDM	;TTI
	Z ,TTODDM	;TTO
IFN PTR,<	EXTERN PTRDDM
	Z ,PTRDDM>
IFN PTP,<	EXTERN PTPDDM
	Z ,PTPDDM>
IFN DSK,<	EXTERN DSKDDM
	Z ,DSKDDM>
IFN RTC,<	EXTERN RTCDDM
	Z ,RTCDDM>
IFN LPT,<	EXTERN LPTDDM
	Z ,LPTDDM>
IFN NOVA,<	IFN MDV,<	EXTERN MDVDDM
	Z ,MDVDDM>>
IFN CDR,<	EXTERN CDRDDM
	Z ,CDRDDM>
IFN DCM,<	EXTERN DCMDDM
	Z ,DCMDDM>
	Z
;
RSTLST:	Z ,TTIRST	;I/O RESET ROUTINES:  TTI
	Z ,TTORST	;TTO
IFN PTR,<	EXTERN PTRRST
	Z ,PTRRST>
IFN PTP,<	EXTERN PTPRST
	Z ,PTPRST>
IFN DSK,<	EXTERN DSKRST
	Z ,DSKRST>
IFN RTC,<	EXTERN RTCRST
	Z ,RTCRST>
IFN LPT,<	EXTERN LPTRST
	Z ,LPTRST>
IFN NOVA,<	IFN MDV,<	EXTERN MDVRST
	Z ,MDVRST>>
IFN CDR,<	EXTERN CDRRST
	Z ,CDRRST>
IFN DCM,<	EXTERN DCMRST
	Z ,DCMRST>
	Z
;
IOTTBL:	REPEAT 10,<	JRST ILLPTR>	;IOT DISPATCH TABLE.
	JRST TTIP	;10=TTIP
	JRST TTOP	;11=TTOP
	REPEAT 65,<	JRST ILLPTR>	;12-76 ARE ILLEGAL
	JRST IOT77P	;77=CPU
;
BITTBL:	REPEAT ^D34,<	Z>	;BIT POSITION: DEVICE# TABLE.
	10	;BIT 34 (NOVA BIT 14)=TTI
	11	;BIT 35 (NOVA BIT 15)=TTO
;
ILLPTR:	DEV IBIT	;ILLEGAL DEVICE
	TRNE IR,1	;GET SUB-OPCODE. IS IT DIA, DIB, OR DIC?
	CLEARM ,AC(XR2)	;YES, CLEAR THE SELECTED AC.
	JRST ILLEG
;
;VMNCOM, NOVA/SUPERNOVA COMMUNICATIONS REGION, PAGE 2
;CONDITIONAL EXTRACTORS
;
IFN PTR,<	EXTERN PTRP
	RELOC IOTTBL+12
	JRST PTRP
	RELOC BITTBL+^D31
	12>

IFN PTP,<	EXTERN PTPP
	RELOC IOTTBL+13
	JRST PTPP
	RELOC BITTBL+^D19
	13>

IFN RTC,<	EXTERN RTCP
	RELOC IOTTBL+14
	JRST RTCP
	RELOC BITTBL+^D33
	14>

IFN NOVA,<	IFN MDV,<	EXTERN PNMDV
	RELOC IOTTBL+1
	JRST PNMDV>	>

IFE NOVA,<	IFN MDV,<	EXTERN PMDV
	RELOC IOTTBL+1
	JRST PMDV>	>

IFN DSK,<	EXTERN DSKP
	RELOC IOTTBL+20
	JRST DSKP
	RELOC BITTBL+^D29
	20>

IFN LPT,<	EXTERN LPTP
	RELOC IOTTBL+17
	JRST LPTP
	RELOC BITTBL+^D32
	17>

IFN CDR,<	EXTERN CDRP
	RELOC IOTTBL+16
	JRST CDRP
	RELOC BITTBL+^D30
	16>

IFN DCM,<	EXTERN DCMP
	RELOC IOTTBL+24
	JRST DCMP
	RELOC BITTBL+^D20
	24>


	END
